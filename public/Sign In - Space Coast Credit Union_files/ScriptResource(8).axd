var Environment;(function(n){function e(n){r.add(n)}function o(n){u.add(n)}function s(n,i){t.set(i,function(t){n.contains(t.target)||i()});window.addEventListener("click",t.get(i),!0)}function h(n,t){i.set(n,new ResizeObserver(function(n){var i=n[0].contentRect,r=i.width,u=i.height;t({width:r,height:u})}));i.get(n).observe(n);t({width:n.clientWidth,height:n.clientHeight})}function c(n){$.ajax({type:"GET",url:HttpService.resolveRoute(n),headers:{Accept:n.accept,"X-Request-Token":n.token},xhrFields:{responseType:"blob"},success:function(n,t,i){var u="",e=i.getResponseHeader("Content-Disposition"),f,r;e&&(f=e.match(/^attachment; *filename=("[^"]+"|[^ ";]+)$/i),f&&(u=f[1].replace(/"/g,"")));navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,u):(r=document.createElement("a"),r.href=URL.createObjectURL(n),r.download=u,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r))}})}function l(){return document.documentElement.lang||"en-US"}function a(){history.back()}function v(n,t){t?window.open(n,t):window.location.href=n}function y(n){r.forEach(function(t){t(n)})}function p(){var n=window.webkit;n&&n.messageHandlers.architect&&n.messageHandlers.architect.postMessage({name:"refreshCanNavigateBack",callback:"Environment.onCanNavigateBack"})}function w(n){r.delete(n)}function b(n,i){window.removeEventListener("click",t.get(i),!0);t.delete(i)}function k(n){i.get(n).unobserve(n);i.delete(n)}function d(n){function e(n){if(n=n.parentElement,n===document.documentElement)return{scrollContainer:n,scrollportRect:{top:0,bottom:n.clientHeight}};if(n.clientHeight<n.scrollHeight&&["auto","scroll"].includes(getComputedStyle(n).overflowY)){var t=n.getBoundingClientRect();return{scrollContainer:n,scrollportRect:{top:Math.max(t.top,0),bottom:Math.min(t.bottom,document.documentElement.clientHeight)}}}return e(n)}var u=e(n);MessageBus.publish("Environment.adjustScrollport",u);var r=u.scrollContainer,t=u.scrollportRect,o=t.bottom-t.top,i=n.getBoundingClientRect(),f=i.top<t.top||i.height>=o?Math.floor(i.top-t.top):i.bottom>t.bottom?Math.ceil(i.bottom-t.bottom):0;f&&(MessageBus.publish("Environment.scrollStart",{scrollContainer:r}),r.scrollBy?r.scrollBy({top:f,behavior:"smooth"}):r.scrollTop+=f)}var r=new Set,u=new Set,t=new Map,i=new Map,f=window.matchMedia("all and (-ms-high-contrast: active)");f.addListener(function(n){u.forEach(function(t){t(n.matches)})});n.sessionStorage={clear:function(){window.sessionStorage.clear()},getItem:function(n){return window.sessionStorage.getItem(n)},setItem:function(n,t){window.sessionStorage.setItem(n,t)}};n.addCanNavigateBackHandler=e;n.addHighContrastModeHandler=o;n.addOutsideClickHandler=s;n.addResizeHandler=h;n.downloadFile=c;n.getLocale=l;n.navigateBack=a;n.navigateTo=v;n.onCanNavigateBack=y;n.refreshCanNavigateBack=p;n.removeCanNavigateBackHandler=w;n.removeOutsideClickHandler=b;n.removeResizeHandler=k;n.scrollTo=d})(Environment||(Environment={}));